# [‚ôõ N-Queens Solver (Min-Conflicts Algorithm)](https://www.youtube.com/watch?v=7fjmGWkv-sY)

–¢–æ–∑–∏ –ø—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑–∏—Ä–∞ **–µ—Ñ–∏–∫–∞—Å–µ–Ω –∞–ª–≥–æ—Ä–∏—Ç—ä–º –∑–∞ —Ä–µ—à–∞–≤–∞–Ω–µ –Ω–∞ –∑–∞–¥–∞—á–∞—Ç–∞ —Å N —Ü–∞—Ä–∏—Ü–∏** (N-Queens Problem) —á—Ä–µ–∑ _–º–µ—Ç–æ–¥–∞ –Ω–∞ –º–∏–Ω–∏–º–∞–ª–Ω–∏—Ç–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∏_ (_Min-Conflicts Heuristic_).  
–ê–ª–≥–æ—Ä–∏—Ç—ä–º—ä—Ç —Ä–∞–±–æ—Ç–∏ –∑–∞ –≥–æ–ª–µ–º–∏ `n` –∏ –∏–∑–ø–æ–ª–∑–≤–∞ –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –æ—Ç **–æ–ø—Ç–∏–º–∏–∑–∏—Ä–∞–Ω–æ –ø–æ–¥—Ä–µ–∂–¥–∞–Ω–µ** –∏ **–ª–æ–∫–∞–ª–Ω–æ —Ç—ä—Ä—Å–µ–Ω–µ** —Å –≤—ä–∑–º–æ–∂–Ω–∏ —Ä–µ—Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–∏—è.

---

## üß† –û—Å–Ω–æ–≤–Ω–∞ –∏–¥–µ—è

–¶–µ–ª—Ç–∞ –µ –¥–∞ –ø–æ—Å—Ç–∞–≤–∏–º `n` —Ü–∞—Ä–∏—Ü–∏ –≤—ä—Ä—Ö—É `n√ón` —à–∞—Ö–º–∞—Ç–Ω–∞ –¥—ä—Å–∫–∞ —Ç–∞–∫–∞, —á–µ:

- –Ω–∏–∫–æ–∏ –¥–≤–µ —Ü–∞—Ä–∏—Ü–∏ –¥–∞ –Ω–µ —Å–µ –∞—Ç–∞–∫—É–≤–∞—Ç –ø–æ —Ä–µ–¥, –∫–æ–ª–æ–Ω–∞ –∏–ª–∏ –¥–∏–∞–≥–æ–Ω–∞–ª.

–ê–ª–≥–æ—Ä–∏—Ç—ä–º—ä—Ç –∑–∞–ø–æ—á–≤–∞ –æ—Ç **–Ω–∞—á–∞–ª–Ω–æ –ø–æ–¥—Ä–µ–∂–¥–∞–Ω–µ** (pattern –∏–ª–∏ —Å–ª—É—á–∞–π–Ω–æ), —Å–ª–µ–¥ –∫–æ–µ—Ç–æ –∏—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ:

1. –Ω–∞–º–∏—Ä–∞ **—Ü–∞—Ä–∏—Ü–∞—Ç–∞, –∫–æ—è—Ç–æ –∏–º–∞ –Ω–∞–π-–º–Ω–æ–≥–æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∏**;
2. –º–µ—Å—Ç–∏ —è –≤ **—Ä–µ–¥ —Å –Ω–∞–π-–º–∞–ª–∫–æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∏**;
3. –ø–æ–≤—Ç–∞—Ä—è, –¥–æ–∫–∞—Ç–æ –Ω—è–º–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∏ –∏–ª–∏ –∏–∑—Ç–µ—á–µ –ª–∏–º–∏—Ç—ä—Ç `max_steps`.

---

## ‚öôÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞ –∫–æ–¥–∞

### 1Ô∏è‚É£ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ –ø–æ–º–æ—â–Ω–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏

```python
def initialize_data(n):
    queenPosition = [0] * n
    conflictRows = [0] * n
    conflictPosDiag = [0] * (2 * n - 1)
    conflictNegDiag = [0] * (2 * n - 1)
    return queenPosition, conflictRows, conflictPosDiag, conflictNegDiag
```

**–ö–∞–∫–≤–æ –ø—Ä–∞–≤–∏:**

–°—ä–∑–¥–∞–≤–∞ –Ω–∞—á–∞–ª–Ω–∏ –º–∞—Å–∏–≤–∏ –∑–∞:

- `queenPosition[col]` ‚Äî —Ä–µ–¥—ä—Ç, –≤ –∫–æ–π—Ç–æ –µ –ø–æ—Å—Ç–∞–≤–µ–Ω–∞ —Ü–∞—Ä–∏—Ü–∞—Ç–∞ –≤ —Å—ä–æ—Ç–≤–µ—Ç–Ω–∞—Ç–∞ –∫–æ–ª–æ–Ω–∞;
- `conflictRows[row]` ‚Äî –±—Ä–æ—è—Ç —Ü–∞—Ä–∏—Ü–∏ –≤ –¥–∞–¥–µ–Ω–∏—è —Ä–µ–¥;
- `conflictPosDiag[d]` ‚Äî —Ü–∞—Ä–∏—Ü–∏ –ø–æ –¥–∏–∞–≥–æ–Ω–∞–ª–∏—Ç–µ `/`;
- `conflictNegDiag[d]` ‚Äî —Ü–∞—Ä–∏—Ü–∏ –ø–æ –¥–∏–∞–≥–æ–Ω–∞–ª–∏—Ç–µ `\`.

–¢–µ–∑–∏ –º–∞—Å–∏–≤–∏ –ø–æ–∑–≤–æ–ª—è–≤–∞—Ç O(1) –∏–∑—á–∏—Å–ª–µ–Ω–∏–µ –Ω–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∏.

### 2Ô∏è‚É£ –ü–æ–¥—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ —Ü–∞—Ä–∏—Ü–∏—Ç–µ ‚Äî —à–∞—Ö–º–∞—Ç–µ–Ω —à–∞–±–ª–æ–Ω (pattern)

```python
def arrange_queens_on_board_with_pattern(n, queenPosition, conflictRows, conflictPosDiag, conflictNegDiag):
    """
    –ü–æ–¥—Ä–µ–∂–¥–∞–º–µ —Ü–∞—Ä–∏—Ü–∏—Ç–µ –ø–æ —à–∞–±–ª–æ–Ω (–ø–æ –¥–∏–∞–≥–æ–Ω–∞–ª/–ø—Ä–µ–∑ –∫–æ–ª–æ–Ω–∞):
    –∫–æ–ª–æ–Ω–∏ 1, 3, 5, ... —Å–ª–µ–¥ —Ç–æ–≤–∞ 0, 2, 4, ...
    """
    col = 1
    for row in range(n):
        queenPosition[col] = row
        conflictRows[row] += 1
        conflictPosDiag[row + col] += 1
        conflictNegDiag[n - 1 - row + col] += 1
        col += 2
        if col >= n:
            col = 0
```

**–ó–∞—â–æ —Ç–∞–∫–∞:**

–ü–æ–¥—Ä–µ–∂–¥–∞–Ω–µ—Ç–æ –Ω–∞ –Ω–µ—á–µ—Ç–Ω–∏ –∫–æ–ª–æ–Ω–∏ –ø—ä—Ä–≤–æ (1,3,5,...) —Ä–∞–∑–ø—Ä–µ–¥–µ–ª—è —Ü–∞—Ä–∏—Ü–∏—Ç–µ "—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ" –∏ –Ω–∞–º–∞–ª—è–≤–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—Ç–∞ –æ—Ç –≥–æ–ª–µ–º–∏ –ø—ä—Ä–≤–æ–Ω–∞—á–∞–ª–Ω–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∏.

–ò–∑–ø–æ–ª–∑–≤–∞ —Å–µ –ø—Ä–∏ —á–µ—Ç–Ω–∏—Ç–µ —Ä–µ—Å—Ç–∞—Ä—Ç–∏ (`attempt % 2 == 0`) –∫–∞—Ç–æ ‚Äû—É–º–µ–Ω" –Ω–∞—á–∞–ª–µ–Ω —Ö–æ–¥.

–¢–æ–∑–∏ —à–∞–±–ª–æ–Ω –∑–∞ –ø–æ–¥—Ä–µ–∂–¥–∞–Ω–µ –∏–¥–≤–∞ –æ—Ç –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ, —á–µ –ø—Ä–∏ —à–∞—Ö–º–∞—Ç–Ω–∞—Ç–∞ –¥—ä—Å–∫–∞:

- –Ω–∞–π-—á–µ—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∏ –º–µ–∂–¥—É —Ü–∞—Ä–∏—Ü–∏—Ç–µ —Å–∞ –ø–æ –¥–∏–∞–≥–æ–Ω–∞–ª–∏—Ç–µ;

- –∞–∫–æ –ø–æ—Å—Ç–∞–≤–∏–º —Ü–∞—Ä–∏—Ü–∏—Ç–µ –≤ ‚Äû–∑–∏–≥–∑–∞–≥‚Äú –ø–æ –∫–æ–ª–æ–Ω–∏ (–ø—Ä–µ–∑ –µ–¥–Ω–∞ –∫–æ–ª–æ–Ω–∞),
  —Ç–µ –ø–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ –Ω–µ —Å–ø–æ–¥–µ–ª—è—Ç –¥–∏–∞–≥–æ–Ω–∞–ª–∏ —Ç–æ–ª–∫–æ–≤–∞ —á–µ—Å—Ç–æ.

–¢–∞–∫–∞ –Ω–∞—á–∞–ª–Ω–æ—Ç–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ –≤–µ—á–µ –∏–º–∞ –ø–æ-–º–∞–ª–∫–æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∏,
–∫–æ–µ—Ç–æ –ø—Ä–∞–≤–∏ Min-Conflicts –∞–ª–≥–æ—Ä–∏—Ç—ä–º–∞ –ø–æ-–µ—Ñ–µ–∫—Ç–∏–≤–µ–Ω ‚Äî —Ç–æ–π –∏–º–∞ –ø–æ-–º–∞–ª–∫–æ ‚Äû—Ä–∞–±–æ—Ç–∞‚Äú –¥–∞ –∫–æ—Ä–∏–≥–∏—Ä–∞.

–†–µ–∞–ª–Ω–æ –ø—Ä–∞–≤–∏ —Å–ª–µ–¥–Ω–æ—Ç–æ:

- –∑–∞–ø–æ—á–≤–∞ –¥–∞ –ø–æ—Å—Ç–∞–≤—è —Ü–∞—Ä–∏—Ü–∏ –æ—Ç –∫–æ–ª–æ–Ω–∞ 1, 3, 5, ‚Ä¶,

- —Å–ª–µ–¥ —Ç–æ–≤–∞ —Å–µ –≤—Ä—ä—â–∞ –Ω–∞ 0, 2, 4, ‚Ä¶ (–∫–æ–≥–∞—Ç–æ –∏–∑–ª–µ–∑–µ –∏–∑–≤—ä–Ω –¥—ä—Å–∫–∞—Ç–∞).

–ü—Ä–∏–º–µ—Ä –∑–∞ n = 8:

```
–ö–æ–ª–æ–Ω–∞ ‚Üí 1 3 5 7 0 2 4 6
–†–µ–¥    ‚Üí 0 1 2 3 4 5 6 7
```

### 3Ô∏è‚É£ –°–ª—É—á–∞–π–Ω–æ –ø–æ–¥—Ä–µ–∂–¥–∞–Ω–µ

```python
def arrange_queens_on_board_random(n, queenPosition, conflictRows, conflictPosDiag, conflictNegDiag):
    """–ü–æ–¥—Ä–µ–∂–¥–∞–º–µ —Ü–∞—Ä–∏—Ü–∏—Ç–µ –ø–æ —Å–ª—É—á–∞–µ–Ω –Ω–∞—á–∏–Ω –Ω–∞ –¥—ä—Å–∫–∞—Ç–∞"""
    for col in range(n):
        row = random.randint(0, n - 1)
        queenPosition[col] = row
        conflictRows[row] += 1
        conflictPosDiag[row + col] += 1
        conflictNegDiag[n - 1 - row + col] += 1
```

**–ó–∞—â–æ:**

–¢–∞–∑–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞ –ø—Ä–∏ –Ω–µ—á–µ—Ç–Ω–∏ —Ä–µ—Å—Ç–∞—Ä—Ç–∏, –∑–∞ –¥–∞ —Å–µ –∏–∑–±—è–≥–≤–∞ –∑–∞—Ü–∏–∫–ª—è–Ω–µ –≤ –µ–¥–Ω–∏ –∏ —Å—ä—â–∏ —Ä–µ—à–µ–Ω–∏—è.
–°–ª—É—á–∞–π–Ω–æ—Ç–æ –Ω–∞—á–∞–ª–æ –ø–æ–Ω—è–∫–æ–≥–∞ –ø–æ–º–∞–≥–∞ –¥–∞ —Å–µ –∏–∑–±–µ–≥–Ω–µ –ª–æ–∫–∞–ª–µ–Ω –º–∏–Ω–∏–º—É–º.

### 4Ô∏è‚É£ –ò–∑—á–∏—Å–ª—è–≤–∞–Ω–µ –Ω–∞ –±—Ä–æ—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∏

```python
def count_conflicts(row, col, n, conflictRows, conflictPosDiag, conflictNegDiag):
    """O(1) –∏–∑—á–∏—Å–ª—è–≤–∞–Ω–µ –Ω–∞ –±—Ä–æ—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∏ –∑–∞ –¥–∞–¥–µ–Ω–∞ –ø–æ–∑–∏—Ü–∏—è."""
    return (
        conflictRows[row]
        + conflictPosDiag[row + col]
        + conflictNegDiag[n - 1 - row + col]
    )
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∏:**

–°—ä–±–∏—Ä–∞ –∫–æ–ª–∫–æ —Ü–∞—Ä–∏—Ü–∏ –∏–º–∞ –ø–æ:

- —Ç–µ–∫—É—â–∏—è —Ä–µ–¥;
- –ø–æ–ª–æ–∂–∏—Ç–µ–ª–Ω–∏—è –¥–∏–∞–≥–æ–Ω–∞–ª;
- –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª–Ω–∏—è –¥–∏–∞–≥–æ–Ω–∞–ª.

‚ùó **–¢—ä–Ω—ä–∫ –º–æ–º–µ–Ω—Ç: –∑–∞—â–æ –∏–∑–≤–∞–∂–¥–∞–º–µ -3 –Ω–∞ –º–µ—Å—Ç–∞**

–ö–æ–≥–∞—Ç–æ –∏–∑—á–∏—Å–ª—è–≤–∞–º–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∏—Ç–µ –∑–∞ –≤–µ—á–µ –ø–æ—Å—Ç–∞–≤–µ–Ω–∞ —Ü–∞—Ä–∏—Ü–∞, —Ç—è —Å–∞–º–∞ —É—á–∞—Å—Ç–≤–∞ –≤ —Ç—Ä–∏—Ç–µ –º–∞—Å–∏–≤–∞ –ø–æ 1 –ø—ä—Ç, –∑–∞—Ç–æ–≤–∞:

```python
conflicts = count_conflicts(...) - 3
```

–∏–Ω–∞—á–µ –±–∏ –∏–∑–ª—è–∑–ª–æ, —á–µ —Å–∞–º–∞—Ç–∞ —Ç—è –µ "–≤ –∫–æ–Ω—Ñ–ª–∏–∫—Ç —Å—ä—Å —Å–µ–±–µ —Å–∏".

### 5Ô∏è‚É£ –ù–∞–º–∏—Ä–∞–Ω–µ –Ω–∞ —Ü–∞—Ä–∏—Ü–∞—Ç–∞ —Å –Ω–∞–π-–º–Ω–æ–≥–æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∏

```python
def get_column_with_max_conflicts(n, queenPosition, conflictRows, conflictPosDiag, conflictNegDiag):
    """–ù–∞–º–∏—Ä–∞ –∫–æ–ª–æ–Ω–∞ (—Ü–∞—Ä–∏—Ü–∞) —Å –Ω–∞–π-–º–Ω–æ–≥–æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∏."""
    max_conflicts = -1
    cols = []

    for col in range(n):
        row = queenPosition[col]
        current_conflicts = count_conflicts(row, col, n, conflictRows, conflictPosDiag, conflictNegDiag) - 3

        if current_conflicts == max_conflicts:
           cols.append(col)
        elif current_conflicts > max_conflicts:
           max_conflicts = current_conflicts
           cols = [col]

    if max_conflicts == 0:
        return -1  # –Ω—è–º–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∏ -> —Ä–µ—à–µ–Ω–∏–µ
    return random.choice(cols)
```

**–ó–∞–±–µ–ª–µ–∂–∫–∞:**

–ò–∑–±–∏—Ä–∞–º–µ —Å–ª—É—á–∞–π–Ω–æ –º–µ–∂–¥—É –≤—Å–∏—á–∫–∏ –∫–æ–ª–æ–Ω–∏ —Å –Ω–∞–π-–≤–∏—Å–æ–∫ –±—Ä–æ–π –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∏ ‚Äî —Ç–æ–≤–∞ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç—è–≤–∞ –ø–æ–≤—Ç–æ—Ä—è–µ–º–æ—Å—Ç –∏ –∑–∞—Ü–∏–∫–ª—è–Ω–µ.

### 6Ô∏è‚É£ –ù–∞–º–∏—Ä–∞–Ω–µ –Ω–∞ —Ä–µ–¥ —Å –º–∏–Ω–∏–º–∞–ª–Ω–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∏

```python
def get_row_with_min_conflicts(n, col, queenPosition, conflictRows, conflictPosDiag, conflictNegDiag):
    """–ù–∞–º–∏—Ä–∞ —Ä–µ–¥ —Å –Ω–∞–π-–º–∞–ª–∫–æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∏ –∑–∞ –¥–∞–¥–µ–Ω–∞ –∫–æ–ª–æ–Ω–∞ (—Ü–∞—Ä–∏—Ü–∞)."""
    min_conflicts = float("inf")
    rows = []

    for row in range(n):
        current_conflicts = count_conflicts(row, col, n, conflictRows, conflictPosDiag, conflictNegDiag)

        if queenPosition[col] == row:
            current_conflicts -= 3

        if current_conflicts == min_conflicts:
            rows.append(row)
        elif current_conflicts < min_conflicts:
            min_conflicts = current_conflicts
            rows = [row]

    return random.choice(rows)
```

**–õ–æ–≥–∏–∫–∞:**

–¢—ä—Ä—Å–∏–º –Ω–∞–π-–¥–æ–±—Ä–∏—è —Ä–µ–¥ –∑–∞ –¥–∞–¥–µ–Ω–∞ —Ü–∞—Ä–∏—Ü–∞ (—Ç.–µ. –ø–æ–∑–∏—Ü–∏—è —Å –º–∏–Ω–∏–º–∞–ª–Ω–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∏).
–ê–∫–æ –∏–º–∞ –Ω—è–∫–æ–ª–∫–æ —Ä–∞–≤–Ω–∏ –ø–æ —Å—Ç–æ–π–Ω–æ—Å—Ç, –∏–∑–±–∏—Ä–∞–º–µ —Å–ª—É—á–∞–π–Ω–æ.

### 7Ô∏è‚É£ –ê–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –¥–∞–Ω–Ω–∏—Ç–µ —Å–ª–µ–¥ –º–µ—Å—Ç–µ–Ω–µ

```python
def update_conflict_arrays(n, new_row, col, queenPosition, conflictRows, conflictPosDiag, conflictNegDiag):
    old_row = queenPosition[col]

    conflictRows[old_row] -= 1
    conflictPosDiag[old_row + col] -= 1
    conflictNegDiag[n - 1 - old_row + col] -= 1

    queenPosition[col] = new_row

    conflictRows[new_row] += 1
    conflictPosDiag[new_row + col] += 1
    conflictNegDiag[n - 1 - new_row + col] += 1
```

**–ó–∞—â–æ:**

–í—Å—è–∫–æ –º–µ—Å—Ç–µ–Ω–µ —Ç—Ä—è–±–≤–∞ –¥–∞ –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–∞ –≤—Å–∏—á–∫–∏ –º–∞—Å–∏–≤–∏ –∑–∞ —Ä–µ–¥–æ–≤–µ –∏ –¥–∏–∞–≥–æ–Ω–∞–ª–∏.
–¢–∞–∫–∞ –ø—Ä–∏ —Å–ª–µ–¥–≤–∞—â–∞—Ç–∞ –∏—Ç–µ—Ä–∞—Ü–∏—è –º–æ–∂–µ–º –¥–∞ –∏–∑—á–∏—Å–ª–∏–º –Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∏ –∑–∞ O(1) –≤—Ä–µ–º–µ.

### 8Ô∏è‚É£ –û—Å–Ω–æ–≤–µ–Ω —Ü–∏–∫—ä–ª –Ω–∞ —Ä–µ—à–µ–Ω–∏–µ—Ç–æ

```python
def solve_n_queens(n, max_steps=10_000, restarts=50):
    ...
    for attempt in range(restarts):
        if attempt % 2 == 0:
            arrange_queens_on_board_with_pattern(...)
        else:
            arrange_queens_on_board_random(...)

        for _ in range(max_steps):
            current_col = get_column_with_max_conflicts(...)
            if current_col == -1:
                return queenPosition

            new_row = get_row_with_min_conflicts(...)
            update_conflict_arrays(...)
    return -1
```

üîÅ **–ó–∞—â–æ restarts?**

–ê–ª–≥–æ—Ä–∏—Ç—ä–º—ä—Ç –ø–æ–Ω—è–∫–æ–≥–∞ –º–æ–∂–µ –¥–∞ –∑–∞—Å–µ–¥–Ω–µ –≤ –ª–æ–∫–∞–ª–µ–Ω –º–∏–Ω–∏–º—É–º (–Ω—è–º–∞ —Ö–æ–¥, –∫–æ–π—Ç–æ –Ω–∞–º–∞–ª—è–≤–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∏—Ç–µ, –Ω–æ –≤—Å–µ –æ—â–µ –Ω–µ –µ —Ä–µ—à–µ–Ω–∏–µ).

–ü—Ä–∏ —Ä–µ—Å—Ç–∞—Ä—Ç –∑–∞–ø–æ—á–≤–∞–º–µ –æ—Ç –Ω–æ–≤–æ –Ω–∞—á–∞–ª–Ω–æ —Ä–∞–∑–ø–æ–ª–æ–∂–µ–Ω–∏–µ ‚Äî —á–µ—Å—Ç–æ —Ä–µ—à–µ–Ω–∏–µ—Ç–æ —Å–µ –Ω–∞–º–∏—Ä–∞ —Å–ª–µ–¥ –Ω—è–∫–æ–ª–∫–æ –æ–ø–∏—Ç–∞.

‚è±Ô∏è **–ó–∞—â–æ max_steps?**

–¢–æ–≤–∞ –µ –≥–æ—Ä–Ω–∞—Ç–∞ –≥—Ä–∞–Ω–∏—Ü–∞ –Ω–∞ –±—Ä–æ—è –∏—Ç–µ—Ä–∞—Ü–∏–∏ –Ω–∞ –ª–æ–∫–∞–ª–Ω–æ—Ç–æ —Ç—ä—Ä—Å–µ–Ω–µ.

–ê–∫–æ —Å–ª–µ–¥ —Ç–æ–ª–∫–æ–≤–∞ —Å—Ç—ä–ø–∫–∏ –Ω—è–º–∞ —Ä–µ—à–µ–Ω–∏–µ ‚Üí —Ä–µ—Å—Ç–∞—Ä—Ç.

---

## üß© –ü—Ä–∏–º–µ—Ä –∑–∞ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ

```bash
$ python3 n_queens.py
8
[4, 6, 1, 5, 2, 0, 3, 7]
```

–∏–ª–∏ –≤ –∫–æ–¥–∞:

```python
result = solve_n_queens(8)
print(result)
```

---

## üïπÔ∏è –ü—Ä–∏–º–µ—Ä–Ω–∞ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è

```python
def print_board_state(queenPosition):
    n = len(queenPosition)
    for r in range(n):
        row_str = ["*" if queenPosition[c] == r else "_" for c in range(n)]
        print(" ".join(row_str))

print_board_state([4, 6, 1, 5, 2, 0, 3, 7])
```

**–ò–∑—Ö–æ–¥:**

```
_ _ _ _ * _ _ _
_ _ _ _ _ _ * _
_ _ * _ _ _ _ _
_ _ _ _ _ * _ _
_ * _ _ _ _ _ _
_ _ _ * _ _ _ _
* _ _ _ _ _ _ _
_ _ _ _ _ * _ _
```

---

## ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

- –ò–∑—á–∏—Å–ª–µ–Ω–∏—è—Ç–∞ –Ω–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∏ —Å–∞ O(1).
- –ù—è–º–∞ –Ω—É–∂–¥–∞ –æ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –≤—Å—è–∫–∞ –¥–≤–æ–π–∫–∞ —Ü–∞—Ä–∏—Ü–∏ (O(n¬≤)).
- –ö–æ–º–±–∏–Ω–∞—Ü–∏—è—Ç–∞ pattern/random –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–¥–æ–±—Ä—è–≤–∞ —Å—Ç–∞–±–∏–ª–Ω–æ—Å—Ç—Ç–∞.
- –ü–æ–¥–¥—ä—Ä–∂–∞ —Å–µ –±—ä—Ä–∑–æ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ –¥–æ—Ä–∏ –∑–∞ n > 1000.

---

## üìò –†–µ–∑—é–º–µ

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç                              | –¶–µ–ª                                                 |
| -------------------------------------- | --------------------------------------------------- |
| `initialize_data`                      | –°—ä–∑–¥–∞–≤–∞ –Ω–∞—á–∞–ª–Ω–∏—Ç–µ –º–∞—Å–∏–≤–∏                            |
| `arrange_queens_on_board_with_pattern` | –û–ø—Ç–∏–º–∏–∑–∏—Ä–∞–Ω–æ –ø—ä—Ä–≤–æ–Ω–∞—á–∞–ª–Ω–æ —Ä–∞–∑–ø–æ–ª–æ–∂–µ–Ω–∏–µ              |
| `arrange_queens_on_board_random`       | –°–ª—É—á–∞–π–Ω–æ —Ä–∞–∑–ø–æ–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–∏ —Ä–µ—Å—Ç–∞—Ä—Ç–∏                  |
| `count_conflicts`                      | –ò–∑—á–∏—Å–ª—è–≤–∞ —Ç–µ–∫—É—â–∏—Ç–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∏                        |
| `get_column_with_max_conflicts`        | –ò–∑–±–∏—Ä–∞ –Ω–∞–π-–ø—Ä–æ–±–ª–µ–º–Ω–∞—Ç–∞ —Ü–∞—Ä–∏—Ü–∞                       |
| `get_row_with_min_conflicts`           | –ù–∞–º–∏—Ä–∞ —Ä–µ–¥–∞ —Å –Ω–∞–π-–º–∞–ª–∫–æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∏                   |
| `update_conflict_arrays`               | –ê–∫—Ç—É–∞–ª–∏–∑–∏—Ä–∞ –≤—Å–∏—á–∫–∏ –¥–∞–Ω–Ω–∏ —Å–ª–µ–¥ –º–µ—Å—Ç–µ–Ω–µ               |
| `solve_n_queens`                       | –ì–ª–∞–≤–µ–Ω –∫–æ–Ω—Ç—Ä–æ–ª–µ–Ω —Ü–∏–∫—ä–ª —Å —Ä–µ—Å—Ç–∞—Ä—Ç–∏ –∏ –ª–∏–º–∏—Ç –Ω–∞ —Å—Ç—ä–ø–∫–∏ |
